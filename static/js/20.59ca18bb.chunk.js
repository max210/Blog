(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[20],{181:function(n,e){n.exports="### \u5e38\u7528\u547d\u4ee4\n\n- `nginx -t` \u68c0\u67e5\u914d\u7f6e\u662f\u5426\u6b63\u786e\n- `sudo nginx -s reload` \u70ed\u91cd\u8f7d\n\n### \u914d\u7f6e\u7ed3\u6784\n\n```\nmain {\n  events {}\n  http {\n    upstream xxx {}\n    server {},\n    server {},\n  }\n\n}\n```\n\n### nginx \u76ee\u5f55\n\n`/etc/nginx` \u914d\u7f6e\u76ee\u5f55\n\n`/etc/nginx/nginx.conf` \u914d\u7f6e\u4e3b\u6587\u4ef6\uff0c\u5176\u4e2d\n`include /etc/nginx/conf.d/*.conf; #\u5305\u542b\u7684\u5b50\u914d\u7f6e\u9879\u4f4d\u7f6e\u548c\u6587\u4ef6`\n\n`/etc/nginx/conf.d/` \u81ea\u5b9a\u4e49\u914d\u7f6e\u76ee\u5f55\uff0c\u53ef\u7528\u9879\u76ee\u540d\u79f0\u533a\u5206 xxx.conf\n\n### server\n\n- \u6b63\u5411\u4ee3\u7406\n\n```\nserver {\n  listen 80;\n  server_name xx.xxxx.com;\n\n  location / {\n    root  /xxx/;\n    index index.html;\n  }\n}\n```\n\n- \u53cd\u5411\u4ee3\u7406\n\n```\nserver {\n  listen 80;\n  server_name xx.xxxx.com;\n\n  location /api {\n    proxy_pass: api.xxx.com;  # proxy_pass: 122.xxx.xxx.xx:8080;\n  }\n}\n```\n\n- https\n\n```\nserver {\n  listen 443 ssl http2 default_server;   # SSL \u8bbf\u95ee\u7aef\u53e3\u53f7\u4e3a 443\n  server_name xx.xxxx.com;         # \u586b\u5199\u7ed1\u5b9a\u8bc1\u4e66\u7684\u57df\u540d\n\n  ssl_certificate /etc/nginx/xx.crt;   # \u8bc1\u4e66\u6587\u4ef6\u5730\u5740\n  ssl_certificate_key /etc/nginx/xx.key;      # \u79c1\u94a5\u6587\u4ef6\u5730\u5740\n  ssl_session_timeout 10m;\n\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;      #\u8bf7\u6309\u7167\u4ee5\u4e0b\u534f\u8bae\u914d\u7f6e\n  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\n  ssl_prefer_server_ciphers on;\n\n  add_header X-Frame-Options DENY;           # \u51cf\u5c11\u70b9\u51fb\u52ab\u6301\n  add_header X-Content-Type-Options nosniff; # \u7981\u6b62\u670d\u52a1\u5668\u81ea\u52a8\u89e3\u6790\u8d44\u6e90\u7c7b\u578b\n  add_header X-Xss-Protection 1;             # \u9632XSS\u653b\u51fb\n\n  location / {\n    root         /xxx/;\n    index        index.html;\n  }\n}\n```\n\n\u4f8b\u5b50\n```\nlocation / {\n  alias        /root/app/blog/;\n  index       index.html;\n  try_files   $uri $uri/ /index.html;\n  add_header Cache-Control no-cache;\n}\nlocation ~* /blog/static/(js|css|media)/(.*) {\n  alias   /root/app/blog/static/$1/$2;\n  autoindex on;\n  add_header Cache-Control max-age=3153600;\n}\n```\n\nroot vs alias\n\n### location\n\n- \u5339\u914d\u89c4\u5219\n  - = \u5f00\u5934\u8868\u793a\u7cbe\u786e\u5339\u914d\n  - ^~ \u5f00\u5934\u8868\u793a uri \u4ee5\u67d0\u4e2a\u5e38\u89c4\u5b57\u7b26\u4e32\u5f00\u5934\uff0c\u8fd9\u4e2a\u4e0d\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\n  - ~ \u5f00\u5934\u8868\u793a\u533a\u5206\u5927\u5c0f\u5199\u7684\u6b63\u5219\u5339\u914d;\n  - ~* \u5f00\u5934\u8868\u793a\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u6b63\u5219\u5339\u914d\n  - / \u901a\u7528\u5339\u914d, \u5982\u679c\u6ca1\u6709\u5176\u5b83\u5339\u914d,\u4efb\u4f55\u8bf7\u6c42\u90fd\u4f1a\u5339\u914d\u5230\n\n### rerwite\n\n#### docker\n"}}]);